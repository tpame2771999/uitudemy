Index: app/src/main/java/com/example/uit_app/AccountFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.uit_app;\r\n\r\nimport android.app.Activity;\r\nimport android.app.AlertDialog;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.preference.PreferenceManager;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.annotation.RequiresApi;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.squareup.picasso.MemoryPolicy;\r\nimport com.squareup.picasso.NetworkPolicy;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport Model.UserAccount;\r\nimport Retrofit.IMyService;\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\nimport dmax.dialog.SpotsDialog;\r\nimport io.reactivex.Observer;\r\nimport io.reactivex.android.schedulers.AndroidSchedulers;\r\nimport io.reactivex.disposables.Disposable;\r\nimport io.reactivex.schedulers.Schedulers;\r\nimport retrofit2.Retrofit;\r\nimport Retrofit.*;\r\n\r\n\r\npublic class AccountFragment extends Fragment {\r\n    Button personalInfoBtn, btnSecurity, btnProfilePicture, btnLogOut;\r\n    TextView name, email, password, newpassword, newpasswordconfirm;\r\n\r\n    UserAccount userAccount;\r\n\r\n    //Change avatar\r\n    String URLDefault=\"http://149.28.24.98:9000/upload/user_image/\";\r\n    private CircleImageView circleImageView;\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n    }\r\n\r\n    public AccountFragment(UserAccount user) {\r\n        this.userAccount = user;\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        final View rootView = inflater.inflate(R.layout.fragment_account, container, false);\r\n\r\n        name = rootView.findViewById(R.id.account_name);\r\n        email = rootView.findViewById(R.id.account_email);\r\n        personalInfoBtn = rootView.findViewById(R.id.person_information_btn);\r\n\r\n        name.setText(userAccount.getHoten());\r\n        email.setText(userAccount.getMail());\r\n\r\n        personalInfoBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), AccountInfoActivity.class);\r\n                intent.putExtra(\"userAcc\", userAccount);\r\n                startActivityForResult(intent, 1);\r\n            }\r\n        });\r\n        btnSecurity = rootView.findViewById(R.id.security_btn);\r\n        btnSecurity.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), ChangePaswordActivity.class);\r\n                intent.putExtra(\"userAcc\", userAccount);\r\n                startActivityForResult(intent, 2);\r\n            }\r\n        });\r\n\r\n        circleImageView=rootView.findViewById(R.id.imgview_avatar);\r\n        String avurl=URLDefault+userAccount.getAva();\r\n        Picasso.get().load(avurl).placeholder(R.drawable.avatar)\r\n                .error(R.drawable.avatar)\r\n                .networkPolicy(NetworkPolicy.NO_CACHE)\r\n                .memoryPolicy(MemoryPolicy.NO_CACHE).into(circleImageView);\r\n\r\n        btnProfilePicture = rootView.findViewById(R.id.btnProfilePicture);\r\n        btnProfilePicture.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getContext(), ChangeAvatarActivity.class);\r\n                intent.putExtra(\"userAcc\", userAccount);\r\n                startActivityForResult(intent,3);\r\n            }\r\n        });\r\n\r\n        btnLogOut = rootView.findViewById(R.id.logout_btn);\r\n        btnLogOut.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                AlertDialog.Builder alertDialog = new AlertDialog.Builder(getContext())\r\n                        .setTitle(\"Đăng xuất\")\r\n                        .setMessage(\"Bạn có chắc muốn đăng xuất\")\r\n                        .setPositiveButton(\"Có\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                Logout();\r\n\r\n                            }\r\n                        }).setNegativeButton(\"Không\", new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                dialog.dismiss();\r\n                            }\r\n                        });\r\n                alertDialog.show();\r\n            }\r\n        });\r\n        return rootView;\r\n    }\r\n\r\n    private boolean flag = false;\r\n    private void Logout() {\r\n\r\n        IMyService iMyService;\r\n        final AlertDialog alertDialog;\r\n        Retrofit retrofitClient= RetrofitClient.getInstance();\r\n        iMyService=retrofitClient.create(IMyService.class);\r\n        alertDialog= new SpotsDialog.Builder().setContext(getContext()).build();\r\n        alertDialog.show();\r\n        iMyService.userLogout(userAccount.getToken()).\r\n                subscribeOn(Schedulers.io())\r\n                .observeOn(AndroidSchedulers.mainThread())\r\n                .subscribe(new Observer<String>(){\r\n                    @Override\r\n                    public void onSubscribe(Disposable d) {\r\n\r\n                    }\r\n\r\n                    @RequiresApi(api = Build.VERSION_CODES.KITKAT)\r\n                    @Override\r\n                    public void onNext(String response) {\r\n\r\n\r\n\r\n\r\n                        if(response.contains(\"success\")) flag=true;\r\n                        else flag=false;\r\n                        // Toast.makeText(getContext(), response, Toast.LENGTH_SHORT).show();\r\n\r\n\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onError(Throwable e) {\r\n                        new Handler().postDelayed(\r\n                                new Runnable() {\r\n                                    public void run() {\r\n                                        alertDialog.dismiss();\r\n\r\n                                    }\r\n                                }, 500);\r\n                        Toast.makeText(getContext(), e.getMessage(), Toast.LENGTH_SHORT).show();\r\n\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onComplete() {\r\n                        new Handler().postDelayed(\r\n                                new Runnable() {\r\n                                    public void run() {\r\n                                        alertDialog.dismiss();\r\n\r\n                                    }\r\n                                }, 500);\r\n\r\n                        if(flag==true)\r\n                        {\r\n                            SharedPreferences sharedPreferences;\r\n                            sharedPreferences = PreferenceManager.getDefaultSharedPreferences(getContext());\r\n                            SharedPreferences.Editor editor = sharedPreferences.edit();\r\n                            editor.remove(\"name\");\r\n                            editor.remove(\"phone\");\r\n                            editor.remove(\"image\");\r\n                            editor.remove(\"image\");\r\n                            editor.remove(\"email\");\r\n                            editor.remove(\"gender\");\r\n                            editor.remove(\"description\");\r\n                            editor.remove(\"address\");\r\n                            editor.remove(\"token\");\r\n                            editor.remove((\"cartArray\"));\r\n                            editor.commit();\r\n                            Intent intent = new Intent(getContext(),LoginActivity.class);\r\n                            startActivity(intent);\r\n\r\n                        }\r\n                        else\r\n                            Toast.makeText(getContext(), \"Đã có lỗi xảy ra\", Toast.LENGTH_SHORT).show();\r\n\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == 1) {\r\n            if (resultCode == Activity.RESULT_OK) {\r\n                userAccount = (UserAccount) data.getSerializableExtra(\"userNewAcc\");\r\n                HomeScreenActivity.userAccount = userAccount;\r\n\r\n                name.setText(userAccount.getHoten());\r\n                email.setText(userAccount.getMail());\r\n\r\n                SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(getContext());\r\n                SharedPreferences.Editor editor = sharedPreferences.edit();\r\n\r\n                editor.putString(\"name\", userAccount.getHoten());\r\n                editor.putString(\"gender\", userAccount.getGioitinh());\r\n                editor.putString(\"description\", userAccount.getMota());\r\n                editor.putString(\"phone\", userAccount.getSdt());\r\n                editor.putString(\"address\", userAccount.getDiachia());\r\n\r\n                editor.apply();\r\n            }\r\n        }\r\n\r\n        if (requestCode == 2) {\r\n            if (resultCode == Activity.RESULT_OK) {\r\n\r\n                userAccount = (UserAccount) data.getSerializableExtra(\"usernewAcc\");\r\n                ((HomeScreenActivity)getActivity()).userAccount=userAccount;\r\n\r\n                SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(getContext());\r\n                SharedPreferences.Editor editor = sharedPreferences.edit();\r\n\r\n                editor.putString(\"password\", userAccount.getMatkhau());\r\n\r\n                editor.apply();\r\n            }\r\n        }\r\n\r\n        if (requestCode == 3) {\r\n            if (resultCode == Activity.RESULT_OK) {\r\n\r\n                userAccount = (UserAccount) data.getSerializableExtra(\"usernewAcc\");\r\n                Picasso.get().load(URLDefault+userAccount.getAva()).placeholder(R.drawable.avatar).error(R.drawable.avatar).networkPolicy(NetworkPolicy.NO_CACHE).memoryPolicy(MemoryPolicy.NO_CACHE).into(circleImageView);\r\n                ((HomeScreenActivity)getActivity()).userAccount=userAccount;\r\n\r\n                SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(getContext());\r\n                SharedPreferences.Editor editor = sharedPreferences.edit();\r\n\r\n                editor.putString(\"image\",userAccount.getAva());\r\n                editor.apply();\r\n            }\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/uit_app/AccountFragment.java	(revision 4b45a96a61c9135eb87e922027f43291da9e4d91)
+++ app/src/main/java/com/example/uit_app/AccountFragment.java	(date 1604380684285)
@@ -39,7 +39,6 @@
 public class AccountFragment extends Fragment {
     Button personalInfoBtn, btnSecurity, btnProfilePicture, btnLogOut;
     TextView name, email, password, newpassword, newpasswordconfirm;
-
     UserAccount userAccount;
 
     //Change avatar
@@ -151,14 +150,11 @@
                     public void onNext(String response) {
 
 
-
-
                         if(response.contains("success")) flag=true;
                         else flag=false;
                         // Toast.makeText(getContext(), response, Toast.LENGTH_SHORT).show();
 
 
-
                     }
 
                     @Override
Index: build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath 'com.android.tools.build:gradle:4.1.0'\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        maven { url \"https://jitpack.io\" }\r\n\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- build.gradle	(revision 4b45a96a61c9135eb87e922027f43291da9e4d91)
+++ build.gradle	(date 1604370593096)
@@ -19,6 +19,7 @@
         jcenter()
         maven { url "https://jitpack.io" }
 
+
     }
 }
 
